<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>お客様アンケート</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
    }
    textarea {
      width: 100%;
      height: 100px;
      margin-top: 10px;
    }
    .stars input {
      display: none;
    }
    .stars label {
      font-size: 2rem;
      color: #ccc;
      cursor: pointer;
    }
    .stars input:checked ~ label,
    .stars label:hover,
    .stars label:hover ~ label {
      color: gold;
    }
    .hidden {
      display: none;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1rem;
    }
    #thanks-message {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>サービスアンケート</h1>
  <p>本日のサービスについて、評価とご意見をお願いします。</p>

  <div class="stars" id="star-rating">
    <input type="radio" name="star" id="star5" value="5"><label for="star5">★</label>
    <input type="radio" name="star" id="star4" value="4"><label for="star4">★</label>
    <input type="radio" name="star" id="star3" value="3"><label for="star3">★</label>
    <input type="radio" name="star" id="star2" value="2"><label for="star2">★</label>
    <input type="radio" name="star" id="star1" value="1"><label for="star1">★</label>
  </div>

  <textarea id="comment" placeholder="ご意見・ご感想をお書きください"></textarea><br>
  <button onclick="submitSurvey()">送信</button>

  <p id="thanks-message" class="hidden"></p>

  <script>
    function submitSurvey() {
      const stars = document.querySelector('input[name="star"]:checked');
      const comment = document.getElementById("comment").value.trim();
      const thanks = document.getElementById("thanks-message");

      if (!stars) {
        alert("評価を選択してください。");
        return;
      }
      if (comment === "") {
        alert("コメントを入力してください。");
        return;
      }

      const rating = parseInt(stars.value);
      if (rating >= 4) {
        if (confirm("よろしければこのコメントをGoogleレビューに投稿しますか？")) {
          // コメントをクリップボードにコピー
          navigator.clipboard.writeText(comment).then(() => {
            alert("コメントがコピーされました。Googleのクチコミ投稿画面で貼り付けてご投稿ください。");
            // Place IDを使ったGoogleレビューURLに遷移
            window.open("https://search.google.com/local/writereview?placeid=ChIJ7RxtWvTzGGARRL8nQCZuSeI", "_blank");
          }).catch(err => {
            alert("コピーに失敗しました。手動でコピーしてください。");
          });
        }
      } else {
        thanks.textContent = "ご意見ありがとうございました。今後のサービス向上に役立てます。";
        thanks.classList.remove("hidden");
      }
    }
  </script>
</body>
</html>
